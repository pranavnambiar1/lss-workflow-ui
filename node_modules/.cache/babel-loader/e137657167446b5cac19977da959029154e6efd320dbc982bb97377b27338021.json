{"ast":null,"code":"var _jsxFileName = \"/Users/pranav.nambiar/Documents/lss-workflow-ui/src/components/WorkflowBuilder.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useState } from 'react';\nimport { Box, Typography, Chip } from '@mui/material';\nimport ReactFlow, { addEdge, useNodesState, useEdgesState, Controls, Background, BackgroundVariant } from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport ApiSidebar from './ApiSidebar';\nimport JobsPanel from './JobsPanel';\nimport ResponseSelectorModal from './ResponseSelectorModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WorkflowBuilder = ({\n  workflowState,\n  setWorkflowState\n}) => {\n  _s();\n  const [nodes, setNodes, onNodesChange] = useNodesState([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n  const [isResponseModalOpen, setIsResponseModalOpen] = useState(false);\n  const [pendingConnection, setPendingConnection] = useState(null);\n  const onConnect = useCallback(params => {\n    // Open response selector modal when connecting nodes\n    setPendingConnection(params);\n    setIsResponseModalOpen(true);\n  }, []);\n  const handleResponseSelection = useCallback(responseId => {\n    if (pendingConnection) {\n      const newEdge = {\n        ...pendingConnection,\n        id: `edge-${pendingConnection.source}-${pendingConnection.target}`,\n        data: {\n          responseId\n        }\n      };\n      setEdges(eds => addEdge(newEdge, eds));\n      setPendingConnection(null);\n    }\n    setIsResponseModalOpen(false);\n  }, [pendingConnection, setEdges]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      height: '100vh',\n      display: 'flex'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        zIndex: 1000,\n        backgroundColor: 'white',\n        borderBottom: '1px solid #e0e0e0',\n        p: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: \"LSS Workflow Builder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Chip, {\n          label: `Asset: ${workflowState.assetClass}`,\n          color: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Chip, {\n          label: `Lender: ${workflowState.lenderName}`,\n          color: \"secondary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ApiSidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flex: 1,\n        mt: 8\n      },\n      children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n        nodes: nodes,\n        edges: edges,\n        onNodesChange: onNodesChange,\n        onEdgesChange: onEdgesChange,\n        onConnect: onConnect,\n        fitView: true,\n        children: [/*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Background, {\n          variant: BackgroundVariant.Dots,\n          gap: 20,\n          size: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(JobsPanel, {\n      onNodeAdd: node => {\n        setNodes(nds => [...nds, node]);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ResponseSelectorModal, {\n      open: isResponseModalOpen,\n      onClose: () => {\n        setIsResponseModalOpen(false);\n        setPendingConnection(null);\n      },\n      onSelect: handleResponseSelection,\n      sourceNodeId: (pendingConnection === null || pendingConnection === void 0 ? void 0 : pendingConnection.source) || ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(WorkflowBuilder, \"ftWxI41aIGNDlDIUHZqpSr3WN1A=\", false, function () {\n  return [useNodesState, useEdgesState];\n});\n_c = WorkflowBuilder;\nexport default WorkflowBuilder;\nvar _c;\n$RefreshReg$(_c, \"WorkflowBuilder\");","map":{"version":3,"names":["React","useCallback","useState","Box","Typography","Chip","ReactFlow","addEdge","useNodesState","useEdgesState","Controls","Background","BackgroundVariant","ApiSidebar","JobsPanel","ResponseSelectorModal","jsxDEV","_jsxDEV","WorkflowBuilder","workflowState","setWorkflowState","_s","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","isResponseModalOpen","setIsResponseModalOpen","pendingConnection","setPendingConnection","onConnect","params","handleResponseSelection","responseId","newEdge","id","source","target","data","eds","sx","height","display","children","position","top","left","right","zIndex","backgroundColor","borderBottom","p","alignItems","gap","variant","fileName","_jsxFileName","lineNumber","columnNumber","label","assetClass","color","lenderName","flex","mt","fitView","Dots","size","onNodeAdd","node","nds","open","onClose","onSelect","sourceNodeId","_c","$RefreshReg$"],"sources":["/Users/pranav.nambiar/Documents/lss-workflow-ui/src/components/WorkflowBuilder.tsx"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Paper,\n  Chip,\n} from '@mui/material';\nimport ReactFlow, {\n  Node,\n  Edge,\n  addEdge,\n  Connection,\n  useNodesState,\n  useEdgesState,\n  Controls,\n  Background,\n  BackgroundVariant,\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\n\nimport { WorkflowState } from '../types';\nimport ApiSidebar from './ApiSidebar';\nimport JobsPanel from './JobsPanel';\nimport ResponseSelectorModal from './ResponseSelectorModal';\n\ninterface WorkflowBuilderProps {\n  workflowState: WorkflowState;\n  setWorkflowState: React.Dispatch<React.SetStateAction<WorkflowState>>;\n}\n\nconst WorkflowBuilder: React.FC<WorkflowBuilderProps> = ({\n  workflowState,\n  setWorkflowState,\n}) => {\n  const [nodes, setNodes, onNodesChange] = useNodesState([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n  const [isResponseModalOpen, setIsResponseModalOpen] = useState(false);\n  const [pendingConnection, setPendingConnection] = useState<Connection | null>(null);\n\n  const onConnect = useCallback(\n    (params: Connection) => {\n      // Open response selector modal when connecting nodes\n      setPendingConnection(params);\n      setIsResponseModalOpen(true);\n    },\n    []\n  );\n\n  const handleResponseSelection = useCallback(\n    (responseId: string) => {\n      if (pendingConnection) {\n        const newEdge = {\n          ...pendingConnection,\n          id: `edge-${pendingConnection.source}-${pendingConnection.target}`,\n          data: { responseId },\n        };\n        setEdges((eds) => addEdge(newEdge, eds));\n        setPendingConnection(null);\n      }\n      setIsResponseModalOpen(false);\n    },\n    [pendingConnection, setEdges]\n  );\n\n  return (\n    <Box sx={{ height: '100vh', display: 'flex' }}>\n      {/* Header */}\n      <Box\n        sx={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          zIndex: 1000,\n          backgroundColor: 'white',\n          borderBottom: '1px solid #e0e0e0',\n          p: 2,\n        }}\n      >\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n          <Typography variant=\"h6\">LSS Workflow Builder</Typography>\n          <Chip label={`Asset: ${workflowState.assetClass}`} color=\"primary\" />\n          <Chip label={`Lender: ${workflowState.lenderName}`} color=\"secondary\" />\n        </Box>\n      </Box>\n\n      {/* API Sidebar */}\n      <ApiSidebar />\n\n      {/* Main Canvas Area */}\n      <Box sx={{ flex: 1, mt: 8 }}>\n        <ReactFlow\n          nodes={nodes}\n          edges={edges}\n          onNodesChange={onNodesChange}\n          onEdgesChange={onEdgesChange}\n          onConnect={onConnect}\n          fitView\n        >\n          <Controls />\n          <Background variant={BackgroundVariant.Dots} gap={20} size={1} />\n        </ReactFlow>\n      </Box>\n\n      {/* Jobs Panel */}\n      <JobsPanel\n        onNodeAdd={(node) => {\n          setNodes((nds) => [...nds, node]);\n        }}\n      />\n\n      {/* Response Selector Modal */}\n      <ResponseSelectorModal\n        open={isResponseModalOpen}\n        onClose={() => {\n          setIsResponseModalOpen(false);\n          setPendingConnection(null);\n        }}\n        onSelect={handleResponseSelection}\n        sourceNodeId={pendingConnection?.source || ''}\n      />\n    </Box>\n  );\n};\n\nexport default WorkflowBuilder;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}